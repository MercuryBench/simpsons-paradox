<!DOCTYPE html>
<meta charset="utf-8">
<script src="https://distill.pub/template.v1.js"></script>
<script src="https://d3js.org/d3.v5.js"></script>
<script src="buildFigure.js"></script>
    <script type="text/x-mathjax-config">
      MathJax.Hub.Config({tex2jax: {inlineMath: [['$','$'], ['\\(','\\)']]}});
    </script>

    <script>    
    var dataA = {Nx: 60, Ny: 24, Nx11: 54, Nx12: 6, Nx21: 42, Nx22: 18, Ny1: 8, Ny2: 16};
                        var dataB = {Nx: 60, Ny: 24, Nx11: 51, Nx12: 9, Nx21: 39, Nx22: 21, Ny1: 20, Ny2: 4};
                        var scale = 8
                        var paddingBar = 50
    </script>

<script type="text/front-matter">
  title: "Article Title"
  description: "Article description"
  authors:
  - Philipp Wacker:
  affiliations:
  - Friedrich-Alexander-Universität Erlangen-Nürnberg
</script>
<style>
    text {font-size: 8pt}
    div.tooltip {	
    position: absolute;			
    text-align: center;			
    width: 60px;					
    height: 28px;					
    padding: 2px;				
    font: 12px sans-serif;		
    background: lightsteelblue;	
    border: 0px;		
    border-radius: 8px;			
    pointer-events: none;	}
</style>
    <dt-article>
        
                  <h1>Simpson's paradox</h1>
                  <p>
                      This is the stat lady's cool explanation on Simpson's paradox. We will try to understand how it can happen that
                  </p>
                  <ul>
                      <li>Treatment A is more effective than Treatment B for both small and kidney stones.</li>
                      <li>Treatment A is less effective than Treatment B if you "ignore" kidney stone size.</li>
                  </ul>
                  <p>
                    We start by looking at some patients like a hospital manager would: Featureless objects lacking personality and history. We even abstract away gender, age and their ice cream preferences.
                  </p>
                  <p>Keep in mind: Every white square is exactly one patient.</p>
                  <svg id="patients" width=600 height=300 style="background: grey">
                  </svg>
                  <script>
                    var N = 100
                    var svg = d3.select("#patients")
                    lst = []
                    for (var i=0; i<N; i++) {
                      lst.push([Math.random()*(600-2*scale) + scale, Math.random()*(300-2*scale) + scale]);

                    }

                    svg.selectAll("rect").data(lst).enter()
                      .append("rect")
                      .attr("x", function(d){return d[0];})
                      .attr("y", function(d){return d[1];})
                      .attr("width", scale).attr("height", scale)
                      .attr("fill", "white")
                      .attr("stroke", "black")
                    </script>
                  <p>
                    For each treatment A and B we consider 1440<dt-fn>Not, because this is one percent of the <a href=https://en.wikipedia.org/wiki/144,000>redeemed</a> but because it is a natural
                        number which is nicely divisible by a lot of other numbers: 1,2,3,4,5,6,8,9,10,12,15,16,18,20,24,30,32,36,40,45,48,60,72,80,90,96,120,144,160,180,240,288,360,480,720,1440.
                    </dt-fn> patients subjected to it. We arrange them nicely in a rectangle 60 by 24, like so:
                  </p>
                  <svg id="figWhole" style="background: grey", style="stroke: black">
                  </svg>
                  <script>//
                      var labelAll = dataA.Nx + " * " + dataA.Ny + " = " + dataA.Nx*dataA.Ny + " patients";
                      var labelDataA = {labelUpper: ["patients", "hidden"], labelLower: ["patients", "hidden"], labelUpperLeft: [labelAll, "hidden"], labelUpperRight: [labelAll, "hidden"], labelLowerLeft: [labelAll, "hidden"], labelLowerRight: [labelAll, "hidden"]};
                      var labelDataB = {labelUpper: ["patients", "hidden"], labelLower: ["patients", "hidden"], labelUpperLeft: [labelAll, "hidden"], labelUpperRight: [labelAll, "hidden"], labelLowerLeft: [labelAll, "hidden"], labelLowerRight: [labelAll, "hidden"]};
                        var dataB = {Nx: 60, Ny: 24, Nx11: 51, Nx12: 9, Nx21: 39, Nx22: 21, Ny1: 20, Ny2: 4};
                        var graphicalDataA = {padding: 1, scale: scale, textPadding: 30, color: ["white", "white", "white", "white"], subdivideVert: false, subdivideHori: false, paddingBlocks : 5, paddingBar: 50, widthBar: 25, titleLeft: "Treatment A", titleRight: "Treatment B", titlePadding: 50, labelData: labelDataA};
                        var graphicalDataB = {padding: 1, scale: scale, textPadding: 30, color: ["white", "white", "white", "white"], subdivideVert: false, subdivideHori: false, paddingBlocks : 5, paddingBar: 50, widthBar: 25, titleLeft: "Treatment A", titleRight: "Treatment B", titlePadding: 50, labelData: labelDataB};
                        var paddingBlocks = 5 // padding between W and M block
                                                
                        buildFigure(d3.select("#figWhole"), dataA, dataA, graphicalDataA, graphicalDataB)
                        
                        
                    </script>
</dt-article>